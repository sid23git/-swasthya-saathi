<!DOCTYPE html>
<html lang="hi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§∏‡§æ‡§•‡•Ä - ‡§°‡•á‡§Æ‡•ã ‡§°‡•á‡§ü‡§æ ‡§∏‡•Ä‡§°‡§∞</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@400;500;600;700&family=Inter:wght@400;500;600;700&display=swap"
        rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans Devanagari', 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        h1 {
            text-align: center;
            color: #2E7D32;
            margin-bottom: 10px;
            font-size: 2rem;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 40px;
            font-size: 0.95rem;
        }

        .button-group {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 30px;
        }

        .btn {
            padding: 20px 30px;
            font-size: 1.2rem;
            font-weight: 600;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-family: 'Noto Sans Devanagari', sans-serif;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .btn-seed {
            background: linear-gradient(135deg, #2E7D32 0%, #388E3C 100%);
            color: white;
        }

        .btn-clear {
            background: linear-gradient(135deg, #D32F2F 0%, #F44336 100%);
            color: white;
        }

        .btn-dashboard {
            background: linear-gradient(135deg, #0288D1 0%, #03A9F4 100%);
            color: white;
        }

        .progress-section {
            display: none;
            margin-bottom: 30px;
        }

        .progress-section.active {
            display: block;
        }

        .progress-bar {
            width: 100%;
            height: 30px;
            background: #E0E0E0;
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 15px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #2E7D32 0%, #4CAF50 100%);
            width: 0%;
            transition: width 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 0.85rem;
        }

        .status-message {
            text-align: center;
            color: #666;
            font-size: 1rem;
            margin-bottom: 10px;
        }

        .summary {
            display: none;
            background: #E8F5E9;
            border-left: 4px solid #2E7D32;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .summary.active {
            display: block;
        }

        .summary h3 {
            color: #2E7D32;
            margin-bottom: 15px;
        }

        .summary-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #C8E6C9;
        }

        .summary-item:last-child {
            border-bottom: none;
        }

        .summary-label {
            color: #555;
        }

        .summary-value {
            font-weight: 600;
            color: #2E7D32;
        }

        .error-message {
            display: none;
            background: #FFEBEE;
            border-left: 4px solid #D32F2F;
            padding: 15px;
            border-radius: 8px;
            color: #C62828;
            margin-bottom: 20px;
        }

        .error-message.active {
            display: block;
        }

        .spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        @media (max-width: 600px) {
            .container {
                padding: 30px 20px;
            }

            h1 {
                font-size: 1.5rem;
            }

            .btn {
                padding: 16px 24px;
                font-size: 1rem;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>üå± ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§∏‡§æ‡§•‡•Ä</h1>
        <p class="subtitle">‡§°‡•á‡§Æ‡•ã ‡§°‡•á‡§ü‡§æ ‡§∏‡•Ä‡§°‡§∞ - ‡§π‡•à‡§ï‡§•‡•â‡§® ‡§™‡•ç‡§∞‡•á‡§ú‡•á‡§Ç‡§ü‡•á‡§∂‡§®</p>

        <div class="error-message" id="errorMessage"></div>

        <div class="progress-section" id="progressSection">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill">0%</div>
            </div>
            <div class="status-message" id="statusMessage">‡§§‡•à‡§Ø‡§æ‡§∞‡•Ä ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à...</div>
        </div>

        <div class="summary" id="summary">
            <h3>‚úÖ ‡§°‡•á‡§ü‡§æ ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§ú‡•ã‡§°‡§º‡§æ ‡§ó‡§Ø‡§æ!</h3>
            <div class="summary-item">
                <span class="summary-label">üë• ‡§ï‡•Å‡§≤ ‡§Æ‡§∞‡•Ä‡§ú</span>
                <span class="summary-value" id="patientCount">0</span>
            </div>
            <div class="summary-item">
                <span class="summary-label">üìû ‡§µ‡§ø‡§ú‡§ø‡§ü ‡§∞‡§ø‡§ï‡•â‡§∞‡•ç‡§°</span>
                <span class="summary-value" id="visitCount">0</span>
            </div>
            <div class="summary-item">
                <span class="summary-label">üö® ‡§Ö‡§≤‡§∞‡•ç‡§ü</span>
                <span class="summary-value" id="alertCount">0</span>
            </div>
            <div class="summary-item">
                <span class="summary-label">üìÖ ‡§Ö‡§™‡•â‡§á‡§Ç‡§ü‡§Æ‡•á‡§Ç‡§ü</span>
                <span class="summary-value" id="appointmentCount">0</span>
            </div>
        </div>

        <div class="button-group">
            <button class="btn btn-seed" id="seedBtn">
                üå± ‡§°‡•á‡§Æ‡•ã ‡§°‡•á‡§ü‡§æ ‡§≠‡§∞‡•á‡§Ç
            </button>
            <button class="btn btn-clear" id="clearBtn">
                üóëÔ∏è ‡§∏‡§≠‡•Ä ‡§°‡•á‡§ü‡§æ ‡§Æ‡§ø‡§ü‡§æ‡§è‡§Ç
            </button>
            <button class="btn btn-dashboard" id="dashboardBtn" style="display: none;">
                üìä ‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§° ‡§™‡§∞ ‡§ú‡§æ‡§è‡§Ç
            </button>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';
        window.firebaseLoaded = true;
    </script>

    <script type="module">
        import { db } from './firebase-config.js';
        import {
            addPatient,
            addVisit,
            addAlert,
            addAppointment,
            getAllPatients,
            getAllVisits,
            getAllVisits as getVisits,
            getActiveAlerts
        } from './firebase-service.js';

        import {
            collection,
            getDocs,
            deleteDoc,
            doc,
            serverTimestamp,
            Timestamp
        } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        // DOM Elements
        const seedBtn = document.getElementById('seedBtn');
        const clearBtn = document.getElementById('clearBtn');
        const dashboardBtn = document.getElementById('dashboardBtn');
        const progressSection = document.getElementById('progressSection');
        const progressFill = document.getElementById('progressFill');
        const statusMessage = document.getElementById('statusMessage');
        const summary = document.getElementById('summary');
        const errorMessage = document.getElementById('errorMessage');

        // Helper Functions
        function getRandomElement(array) {
            return array[Math.floor(Math.random() * array.length)];
        }

        function generateRandomPhone() {
            const number = Math.floor(1000000000 + Math.random() * 9000000000);
            return `+91${number}`;
        }

        function getRandomDate(daysAgo) {
            const date = new Date();
            date.setDate(date.getDate() - daysAgo);
            return Timestamp.fromDate(date);
        }

        function calculateRiskLevel(bpSystolic, bpDiastolic, sugar, isPregnant) {
            let score = 0;

            // Safely check blood pressure
            if (bpSystolic && bpDiastolic) {
                if (bpSystolic > 140 || bpDiastolic > 90) score += 2;
                else if (bpSystolic > 130 || bpDiastolic > 85) score += 1;
            }

            // Sugar check
            if (sugar > 200) score += 2;
            else if (sugar > 140) score += 1;

            // Pregnancy check
            if (isPregnant) score += 1;

            if (score >= 3) return 'HIGH';
            if (score >= 1) return 'MEDIUM';
            return 'LOW';
        }

        function generateTranscription(patient, ashaName, symptom) {
            const templates = [
                `‡§Æ‡•á‡§∞‡§æ ‡§®‡§æ‡§Æ ${ashaName} ‡§π‡•à‡•§ ‡§Æ‡§∞‡•Ä‡§ú ‡§ï‡§æ ‡§®‡§æ‡§Æ ${patient.name}, ‡§â‡§Æ‡•ç‡§∞ ${patient.age} ‡§∏‡§æ‡§≤, ‡§ó‡§æ‡§Å‡§µ ${patient.village}‡•§ ‡§∞‡§ï‡•ç‡§§‡§ö‡§æ‡§™ ${patient.blood_pressure.systolic}/${patient.blood_pressure.diastolic}, ‡§∂‡•Å‡§ó‡§∞ ${patient.sugar_level}‡•§ ${symptom} ‡§ï‡•Ä ‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§π‡•à‡•§`,
                `${patient.name} ‡§ï‡•ã ${symptom} ‡§π‡•à‡•§ ‡§â‡§Æ‡•ç‡§∞ ${patient.age}, ‡§ó‡§æ‡§Å‡§µ ${patient.village}‡•§ ‡§∞‡§ï‡•ç‡§§‡§ö‡§æ‡§™ ${patient.blood_pressure.systolic}/${patient.blood_pressure.diastolic}, ‡§∂‡•Å‡§ó‡§∞ ${patient.sugar_level}‡•§`,
                `‡§Æ‡§∞‡•Ä‡§ú ${patient.name}, ${patient.village} ‡§∏‡•á‡•§ ${symptom}‡•§ ‡§∞‡§ï‡•ç‡§§‡§ö‡§æ‡§™ ${patient.blood_pressure.systolic}/${patient.blood_pressure.diastolic}‡•§`,
                `${patient.name}, ‡§â‡§Æ‡•ç‡§∞ ${patient.age}, ${patient.village} ‡§ó‡§æ‡§Å‡§µ‡•§ ${symptom} ‡§ï‡•Ä ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ‡•§ BP ${patient.blood_pressure.systolic}/${patient.blood_pressure.diastolic}, ‡§∂‡•Å‡§ó‡§∞ ${patient.sugar_level}‡•§`
            ];
            return getRandomElement(templates);
        }

        function updateProgress(percent, message) {
            progressFill.style.width = `${percent}%`;
            progressFill.textContent = `${Math.round(percent)}%`;
            statusMessage.textContent = message;
        }

        function showError(message) {
            errorMessage.textContent = message;
            errorMessage.classList.add('active');
            setTimeout(() => errorMessage.classList.remove('active'), 5000);
        }

        async function delay(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        // Seed Demo Data
        async function seedDemoData() {
            try {
                seedBtn.disabled = true;
                clearBtn.disabled = true;
                progressSection.classList.add('active');
                summary.classList.remove('active');
                dashboardBtn.style.display = 'none';

                const villages = ["‡§∞‡§æ‡§Æ‡§™‡•Å‡§∞", "‡§ï‡•É‡§∑‡•ç‡§£‡§™‡•Å‡§∞", "‡§∂‡§ø‡§µ‡§™‡•Å‡§∞", "‡§ó‡§æ‡§Ç‡§ß‡•Ä‡§®‡§ó‡§∞", "‡§®‡•á‡§π‡§∞‡•Ç‡§®‡§ó‡§∞"];
                const names = [
                    "‡§∞‡§æ‡§Æ ‡§ï‡•Å‡§Æ‡§æ‡§∞", "‡§∏‡•Ä‡§§‡§æ ‡§¶‡•á‡§µ‡•Ä", "‡§≤‡§ï‡•ç‡§∑‡•ç‡§Æ‡•Ä ‡§¨‡§æ‡§à", "‡§ó‡•ã‡§™‡§æ‡§≤ ‡§∏‡§ø‡§Ç‡§π", "‡§∞‡§Æ‡•á‡§∂ ‡§™‡•ç‡§∞‡§∏‡§æ‡§¶",
                    "‡§ó‡•Ä‡§§‡§æ ‡§¶‡•á‡§µ‡•Ä", "‡§Æ‡•ã‡§π‡§® ‡§≤‡§æ‡§≤", "‡§∏‡§µ‡§ø‡§§‡§æ ‡§ï‡•Å‡§Æ‡§æ‡§∞‡•Ä", "‡§∞‡§æ‡§ú‡•á‡§∂ ‡§Ø‡§æ‡§¶‡§µ", "‡§™‡•ç‡§∞‡•á‡§Æ ‡§∂‡§Ç‡§ï‡§∞",
                    "‡§Ö‡§®‡•Ä‡§§‡§æ ‡§∂‡§∞‡•ç‡§Æ‡§æ", "‡§µ‡§ø‡§ï‡•ç‡§∞‡§Æ ‡§∏‡§ø‡§Ç‡§π", "‡§ï‡§Æ‡§≤‡§æ ‡§¶‡•á‡§µ‡•Ä", "‡§∏‡•Å‡§∞‡•á‡§∂ ‡§ï‡•Å‡§Æ‡§æ‡§∞", "‡§Æ‡§æ‡§Ø‡§æ ‡§¶‡•á‡§µ‡•Ä",
                    "‡§Ö‡§ú‡§Ø ‡§µ‡§∞‡•ç‡§Æ‡§æ", "‡§™‡•Ç‡§ú‡§æ ‡§ó‡•Å‡§™‡•ç‡§§‡§æ", "‡§¶‡•á‡§µ‡•á‡§Ç‡§¶‡•ç‡§∞ ‡§∏‡§ø‡§Ç‡§π", "‡§Æ‡§Ç‡§ú‡•Ç ‡§¶‡•á‡§µ‡•Ä", "‡§∏‡§Ç‡§ú‡§Ø ‡§∞‡§æ‡§Ø",
                    "‡§∞‡•Ä‡§§‡§æ ‡§ï‡•Å‡§Æ‡§æ‡§∞‡•Ä", "‡§µ‡§ø‡§®‡•ã‡§¶ ‡§Ø‡§æ‡§¶‡§µ", "‡§∏‡•Å‡§®‡•Ä‡§§‡§æ ‡§¨‡§æ‡§à", "‡§™‡•ç‡§∞‡§ï‡§æ‡§∂ ‡§∏‡§ø‡§Ç‡§π", "‡§ï‡§µ‡§ø‡§§‡§æ ‡§¶‡•á‡§µ‡•Ä"
                ];
                const symptoms = ["‡§∏‡§∞‡•ç‡§¶‡•Ä-‡§ñ‡§æ‡§Ç‡§∏‡•Ä", "‡§¨‡•Å‡§ñ‡§æ‡§∞", "‡§™‡•á‡§ü ‡§¶‡§∞‡•ç‡§¶", "‡§∏‡§ø‡§∞‡§¶‡§∞‡•ç‡§¶", "‡§ú‡•ã‡§°‡§º‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§¶‡§∞‡•ç‡§¶", "‡§ï‡§Æ‡§ú‡•ã‡§∞‡•Ä", "‡§ö‡§ï‡•ç‡§ï‡§∞ ‡§Ü‡§®‡§æ"];
                const ashaWorkers = ["‡§Æ‡•Ä‡§∞‡§æ ‡§¶‡•á‡§µ‡•Ä", "‡§™‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§∂‡§∞‡•ç‡§Æ‡§æ", "‡§∏‡•Å‡§®‡•Ä‡§§‡§æ ‡§ï‡•Å‡§Æ‡§æ‡§∞‡•Ä", "‡§∞‡•á‡§ñ‡§æ ‡§¨‡§æ‡§à", "‡§™‡•Ç‡§®‡§Æ ‡§∏‡§ø‡§Ç‡§π"];

                const patients = [];
                const patientIds = [];

                // Create 25 patients
                updateProgress(0, '‡§Æ‡§∞‡•Ä‡§ú ‡§ú‡•ã‡§°‡§º‡•á ‡§ú‡§æ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç...');

                for (let i = 0; i < 25; i++) {
                    let bpSystolic, bpDiastolic, sugar, riskLevel;
                    const isPregnant = i < 3; // First 3 are pregnant

                    if (i < 6) { // 6 HIGH RISK
                        bpSystolic = 150 + Math.floor(Math.random() * 20);
                        bpDiastolic = 95 + Math.floor(Math.random() * 15);
                        sugar = 220 + Math.floor(Math.random() * 60);
                        riskLevel = 'HIGH';
                    } else if (i < 16) { // 10 MEDIUM RISK
                        bpSystolic = 130 + Math.floor(Math.random() * 15);
                        bpDiastolic = 85 + Math.floor(Math.random() * 10);
                        sugar = 145 + Math.floor(Math.random() * 45);
                        riskLevel = 'MEDIUM';
                    } else { // 9 LOW RISK
                        bpSystolic = 110 + Math.floor(Math.random() * 15);
                        bpDiastolic = 70 + Math.floor(Math.random() * 12);
                        sugar = 90 + Math.floor(Math.random() * 40);
                        riskLevel = 'LOW';
                    }

                    const patientData = {
                        name: names[i],
                        age: 25 + Math.floor(Math.random() * 45),
                        village: getRandomElement(villages),
                        phone: generateRandomPhone(),
                        bpSystolic,
                        bpDiastolic,
                        sugarLevel: sugar,
                        pregnancyStatus: isPregnant ? 'yes' : 'no',
                        symptoms: getRandomElement(symptoms),
                        riskLevel,
                        insurance: {
                            hasCard: Math.random() > 0.4,
                            policyNumber: Math.random() > 0.4 ? `AB${Math.floor(Math.random() * 1000000)}` : ''
                        }
                    };

                    const result = await addPatient(patientData);
                    if (result.success) {
                        // Store patient with blood_pressure object for generateTranscription
                        const patientWithBP = {
                            ...patientData,
                            id: result.data.id,
                            blood_pressure: {
                                systolic: bpSystolic,
                                diastolic: bpDiastolic
                            },
                            sugar_level: sugar
                        };
                        patients.push(patientWithBP);
                        patientIds.push(result.data.id);
                        console.log(`‚úÖ Patient ${i + 1}/25: ${patientData.name}`);
                    }

                    updateProgress((i + 1) / 25 * 25, `${i + 1}/25 ‡§Æ‡§∞‡•Ä‡§ú ‡§ú‡•ã‡§°‡§º‡•á ‡§ó‡§è`);
                    await delay(50);
                }

                // Create 40 visits
                updateProgress(25, '‡§µ‡§ø‡§ú‡§ø‡§ü ‡§∞‡§ø‡§ï‡•â‡§∞‡•ç‡§° ‡§ú‡•ã‡§°‡§º‡•á ‡§ú‡§æ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç...');

                for (let i = 0; i < 40; i++) {
                    const patient = getRandomElement(patients);
                    const ashaName = getRandomElement(ashaWorkers);
                    const symptom = getRandomElement(symptoms);
                    const daysAgo = Math.floor(Math.random() * 10);

                    const visitData = {
                        patient_id: patient.id,
                        patient_name: patient.name,
                        asha_worker: ashaName,
                        asha_phone: generateRandomPhone(),
                        transcription: generateTranscription(patient, ashaName, symptom),
                        audio_url: `https://demo-audio-${Date.now()}-${i}.mp3`,
                        extracted_data: {
                            name: patient.name,
                            age: patient.age,
                            village: patient.village,
                            vitals: {
                                bp: `${patient.bpSystolic}/${patient.bpDiastolic}`,
                                sugar: patient.sugarLevel
                            },
                            symptoms: symptom
                        },
                        risk_level: patient.riskLevel
                    };

                    const result = await addVisit(visitData);
                    if (result.success) {
                        console.log(`‚úÖ Visit ${i + 1}/40: ${patient.name}`);
                    }

                    updateProgress(25 + (i + 1) / 40 * 35, `${i + 1}/40 ‡§µ‡§ø‡§ú‡§ø‡§ü ‡§ú‡•ã‡§°‡§º‡•á ‡§ó‡§è`);
                    await delay(50);
                }

                // Create 8 alerts
                updateProgress(60, '‡§Ö‡§≤‡§∞‡•ç‡§ü ‡§ú‡•ã‡§°‡§º‡•á ‡§ú‡§æ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç...');

                const highRiskPatients = patients.filter(p => p.riskLevel === 'HIGH');
                const riskFactorsList = [
                    ["‡§â‡§ö‡•ç‡§ö ‡§∞‡§ï‡•ç‡§§‡§ö‡§æ‡§™", "‡§â‡§ö‡•ç‡§ö ‡§∂‡•Å‡§ó‡§∞"],
                    ["‡§ó‡§∞‡•ç‡§≠‡§µ‡§§‡•Ä", "‡§â‡§ö‡•ç‡§ö ‡§∞‡§ï‡•ç‡§§‡§ö‡§æ‡§™"],
                    ["‡§¨‡§π‡•Å‡§§ ‡§â‡§ö‡•ç‡§ö ‡§∂‡•Å‡§ó‡§∞", "‡§ï‡§Æ‡§ú‡•ã‡§∞‡•Ä"],
                    ["‡§â‡§ö‡•ç‡§ö ‡§∞‡§ï‡•ç‡§§‡§ö‡§æ‡§™", "‡§ö‡§ï‡•ç‡§ï‡§∞ ‡§Ü‡§®‡§æ"],
                    ["‡§â‡§ö‡•ç‡§ö ‡§∂‡•Å‡§ó‡§∞", "‡§∏‡§ø‡§∞‡§¶‡§∞‡•ç‡§¶"],
                    ["‡§ó‡§∞‡•ç‡§≠‡§µ‡§§‡•Ä", "‡§â‡§ö‡•ç‡§ö ‡§∂‡•Å‡§ó‡§∞"]
                ];
                const actions = [
                    "‡§§‡•Å‡§∞‡§Ç‡§§ PHC ‡§≠‡•á‡§ú‡•á‡§Ç",
                    "‡§°‡•â‡§ï‡•ç‡§ü‡§∞ ‡§∏‡•á ‡§§‡§§‡•ç‡§ï‡§æ‡§≤ ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§ï‡§∞‡•á‡§Ç",
                    "108 ‡§è‡§Æ‡•ç‡§¨‡•Å‡§≤‡•á‡§Ç‡§∏ ‡§¨‡•Å‡§≤‡§æ‡§è‡§Ç",
                    "‡§Ö‡§∏‡•ç‡§™‡§§‡§æ‡§≤ ‡§Æ‡•á‡§Ç ‡§≠‡§∞‡•ç‡§§‡•Ä ‡§ï‡§∞‡§æ‡§è‡§Ç"
                ];

                for (let i = 0; i < 8; i++) {
                    const patient = getRandomElement(highRiskPatients);
                    const daysAgo = i < 3 ? 0 : i < 6 ? 1 : 2;
                    const acknowledged = i >= 3;

                    const alertData = {
                        visit_id: `visit-${Date.now()}-${i}`,
                        patient_id: patient.id,
                        patient_name: patient.name,
                        village: patient.village,
                        asha_worker: getRandomElement(ashaWorkers),
                        severity: 'HIGH',
                        risk_factors: getRandomElement(riskFactorsList),
                        recommended_action: getRandomElement(actions)
                    };

                    const result = await addAlert(alertData);
                    if (result.success) {
                        console.log(`‚úÖ Alert ${i + 1}/8: ${patient.name}`);
                    }

                    updateProgress(60 + (i + 1) / 8 * 20, `${i + 1}/8 ‡§Ö‡§≤‡§∞‡•ç‡§ü ‡§ú‡•ã‡§°‡§º‡•á ‡§ó‡§è`);
                    await delay(50);
                }

                // Create 18 appointments
                updateProgress(80, '‡§Ö‡§™‡•â‡§á‡§Ç‡§ü‡§Æ‡•á‡§Ç‡§ü ‡§ú‡•ã‡§°‡§º‡•á ‡§ú‡§æ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç...');

                const times = ["09:00", "11:00", "14:00", "16:00", "10:00", "15:00", "17:00"];
                const notes = ["BP ‡§ú‡§æ‡§Å‡§ö", "‡§´‡•â‡§≤‡•ã‡§Ö‡§™ ‡§µ‡§ø‡§ú‡§ø‡§ü", "‡§¶‡§µ‡§æ ‡§∞‡§ø‡§µ‡•ç‡§Ø‡•Ç", "‡§∂‡•Å‡§ó‡§∞ ‡§ú‡§æ‡§Å‡§ö", "‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§ö‡•á‡§ï‡§Ö‡§™"];

                for (let i = 0; i < 18; i++) {
                    const patient = getRandomElement(patients);
                    let daysFromNow;

                    if (i < 4) daysFromNow = 0; // Today
                    else if (i < 11) daysFromNow = 1 + Math.floor(Math.random() * 3); // Next 3 days
                    else daysFromNow = 4 + Math.floor(Math.random() * 7); // Next week

                    const appointmentDate = new Date();
                    appointmentDate.setDate(appointmentDate.getDate() + daysFromNow);

                    const appointmentData = {
                        patient_id: patient.id,
                        patient_name: patient.name,
                        date: appointmentDate.toISOString().split('T')[0],
                        time: getRandomElement(times),
                        notes: getRandomElement(notes)
                    };

                    const result = await addAppointment(appointmentData);
                    if (result.success) {
                        console.log(`‚úÖ Appointment ${i + 1}/18: ${patient.name}`);
                    }

                    updateProgress(80 + (i + 1) / 18 * 20, `${i + 1}/18 ‡§Ö‡§™‡•â‡§á‡§Ç‡§ü‡§Æ‡•á‡§Ç‡§ü ‡§ú‡•ã‡§°‡§º‡•á ‡§ó‡§è`);
                    await delay(50);
                }

                // Show summary
                updateProgress(100, '‚úÖ ‡§™‡•Ç‡§∞‡•ç‡§£!');
                await delay(500);

                document.getElementById('patientCount').textContent = '25';
                document.getElementById('visitCount').textContent = '40';
                document.getElementById('alertCount').textContent = '8';
                document.getElementById('appointmentCount').textContent = '18';

                summary.classList.add('active');
                dashboardBtn.style.display = 'block';

                console.log('‚úÖ Demo data seeding complete!');

            } catch (error) {
                console.error('‚ùå Error seeding data:', error);
                showError(`‡§°‡•á‡§ü‡§æ ‡§ú‡•ã‡§°‡§º‡§®‡•á ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø: ${error.message}`);
            } finally {
                seedBtn.disabled = false;
                clearBtn.disabled = false;
            }
        }

        // Clear All Data
        async function clearAllData() {
            if (!confirm('‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§∏‡§≠‡•Ä ‡§°‡•á‡§ü‡§æ ‡§Æ‡§ø‡§ü‡§æ‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç? ‡§Ø‡§π ‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§µ‡§æ‡§™‡§∏ ‡§®‡§π‡•Ä‡§Ç ‡§ï‡•Ä ‡§ú‡§æ ‡§∏‡§ï‡§§‡•Ä‡•§')) {
                return;
            }

            try {
                seedBtn.disabled = true;
                clearBtn.disabled = true;
                progressSection.classList.add('active');
                summary.classList.remove('active');
                dashboardBtn.style.display = 'none';

                const collections = ['patients', 'visits', 'alerts', 'appointments'];
                let totalDeleted = 0;

                for (let i = 0; i < collections.length; i++) {
                    const collectionName = collections[i];
                    updateProgress((i / collections.length) * 100, `${collectionName} ‡§Æ‡§ø‡§ü‡§æ‡§Ø‡§æ ‡§ú‡§æ ‡§∞‡§π‡§æ ‡§π‡•à...`);

                    const querySnapshot = await getDocs(collection(db, collectionName));
                    const deletePromises = [];

                    querySnapshot.forEach((document) => {
                        deletePromises.push(deleteDoc(doc(db, collectionName, document.id)));
                        totalDeleted++;
                    });

                    await Promise.all(deletePromises);
                    console.log(`‚úÖ Deleted ${querySnapshot.size} documents from ${collectionName}`);
                    await delay(100);
                }

                updateProgress(100, `‚úÖ ${totalDeleted} ‡§°‡•â‡§ï‡•ç‡§Ø‡•Ç‡§Æ‡•á‡§Ç‡§ü ‡§Æ‡§ø‡§ü‡§æ‡§è ‡§ó‡§è`);
                await delay(1000);

                progressSection.classList.remove('active');
                alert('‚úÖ ‡§∏‡§≠‡•Ä ‡§°‡•á‡§ü‡§æ ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§Æ‡§ø‡§ü‡§æ‡§Ø‡§æ ‡§ó‡§Ø‡§æ!');

            } catch (error) {
                console.error('‚ùå Error clearing data:', error);
                showError(`‡§°‡•á‡§ü‡§æ ‡§Æ‡§ø‡§ü‡§æ‡§®‡•á ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø: ${error.message}`);
            } finally {
                seedBtn.disabled = false;
                clearBtn.disabled = false;
            }
        }

        // Event Listeners
        seedBtn.addEventListener('click', seedDemoData);
        clearBtn.addEventListener('click', clearAllData);
        dashboardBtn.addEventListener('click', () => {
            window.location.href = 'index.html';
        });

        console.log('üå± Demo Data Seeder Ready!');
    </script>
</body>

</html>